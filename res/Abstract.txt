Cartesian impedance control is a type of motion control strategy for robots that improves safety in partially-unknown environments by achieving a compliant behavior of the robot with respect to its external forces. This compliant robot behavior has the added benefit of allowing physical human guidance of the robot. In this paper, we proposed a C++ implementation of compliance control valid for any torque-commanded robotic manipulator. The proposed controller implemented Cartesian impedance control to track a desired end-effector pose. Additionally, joint impedance was projected in the null-space of the Cartesian robot motion to track a desired robot joint configuration without perturbing the Cartesian motion of the robot. Also, the proposed implementation allowed the robot to apply desired forces and torques to its environment. Moreover, several safety features such as filtering, rate limiting, and saturation have been included in the proposed implementation, to achieve a smooth behavior of the controlled robot. Finally, the proposed implementation was tested for the KUKA LBR iiwa Robot and for the Franka Emika Robot, both in simulation and with physical robots, using Robot Operating System (ROS).


